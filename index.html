<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8">
  <title>Vertical Dodge Game</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    html,body { margin:0; padding:0; height:100%; background:#87ceeb; font-family:sans-serif; overflow:hidden;}
    #game-container { width:100%; height:100vh; position:relative; }
    #scorePanel { position:absolute; top:12px; left:12px; background:rgba(0,0,0,0.3); color:white;
      padding:8px 12px; border-radius:8px; z-index:50; font-weight:bold;}
    #overlay { position:absolute; inset:0; background:rgba(0,0,0,0.6);
      display:flex; align-items:center; justify-content:center; flex-direction:column; color:white; z-index:100;}
    #overlay button { background:linear-gradient(180deg,#FFD700,#FF8A00); border:none; padding:10px 18px; font-size:16px;
      border-radius:8px; cursor:pointer; margin-top:10px; }
    #logo { position:absolute; top:10px; left:50%; transform:translateX(-50%);
      width:80px; height:80px; border-radius:50%; box-shadow:0 0 10px rgba(0,0,0,0.4);
      animation: floatLogo 3s ease-in-out infinite; z-index:60; pointer-events:none; }
    @keyframes floatLogo { 0%,100% { transform:translateX(-50%) translateY(0);} 50% { transform:translateX(-50%) translateY(-8px);} }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
</head>
<body>
  <div id="game-container"></div>
  <div id="scorePanel">Score: <span id="score">0</span></div>
  <img id="logo" src="https://pbs.twimg.com/profile_images/1962781271978815488/07fQQARS_400x400.jpg" alt="logo">
  <div id="overlay">
    <h1>Vertical Dodge</h1>
    <p>Use â†‘ / â†“ or tap zones to move. Avoid top & bottom poles!</p>
    <button id="startBtn">Start Game</button>
  </div>

<script>
let score = 0;
let player;
let obstacles;
let gameOver = false;
let gameStarted = false;
let scoreInterval;

const config = {
  type: Phaser.AUTO,
  width: window.innerWidth,
  height: window.innerHeight,
  parent: 'game-container',
  backgroundColor: '#87ceeb',
  physics: { default: 'arcade', arcade: { gravity: { y: 0 }, debug: false } },
  scene: { preload, create, update }
};
const game = new Phaser.Game(config);

function preload(){}

function create(){
  const W = this.scale.width;
  const H = this.scale.height;

  // Player in center
  player = this.add.rectangle(W/2, H/2, 50,50, 0xffd700);
  this.physics.add.existing(player);
  player.body.setCollideWorldBounds(true);

  // Obstacles group
  obstacles = this.physics.add.group();
  this.physics.add.collider(player, obstacles, hitObstacle, null, this);

  // Controls
  this.input.keyboard.on('keydown-UP', ()=>movePlayer(-1));
  this.input.keyboard.on('keydown-DOWN', ()=>movePlayer(1));
  this.input.on('pointerdown', pointer=>{
    const H = game.scale.height;
    if(pointer.y < H/2) movePlayer(-1);
    else movePlayer(1);
  });
}

function update(){
  if(!gameStarted || gameOver) return;
  const W = this.scale.width;
  const H = this.scale.height;

  // spawn top obstacle
  if(Phaser.Math.Between(0,100)<3){
    const width = Phaser.Math.Between(50,120);
    const obs = obstacles.create(W, 0, null).setDisplaySize(width, 40).setOrigin(0,0).setTint(0xff4444);
    obs.body.setVelocityX(-400); obs.body.setAllowGravity(false);
  }

  // spawn bottom obstacle
  if(Phaser.Math.Between(0,100)<3){
    const width = Phaser.Math.Between(50,120);
    const obs = obstacles.create(W, H-40, null).setDisplaySize(width, 40).setOrigin(0,0).setTint(0xff4444);
    obs.body.setVelocityX(-400); obs.body.setAllowGravity(false);
  }

  // remove offscreen obstacles
  obstacles.children.iterate(o=>{ if(o.x<-200) o.destroy(); });
}

function movePlayer(dir){
  if(!gameStarted || gameOver) return;
  player.y += dir*60;
  const H = game.scale.height;
  if(player.y<0) player.y=0;
  if(player.y>H) player.y=H;
}

function hitObstacle(){
  if(gameOver) return;
  gameOver = true;
  clearInterval(scoreInterval);
  showOverlay(`ðŸ’€ Game Over!<br>Score: ${score}`);
}

function startGame(){
  document.getElementById("overlay").style.display = "none";
  score = 0; gameOver=false; gameStarted=true;
  document.getElementById("score").innerText = score;

  scoreInterval = setInterval(()=>{
    if(!gameOver){
      score++; document.getElementById("score").innerText = score;
    }
  },1000);
}

function showOverlay(text){
  const overlay = document.getElementById("overlay");
  overlay.innerHTML = `<h1>${text}</h1><button onclick="restartGame()">Restart</button>`;
  overlay.style.display="flex";
}

function restartGame(){ window.location.reload(); }

document.getElementById("startBtn").addEventListener("click", startGame);
</script>
</body>
</html>
